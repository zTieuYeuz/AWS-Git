[
{
	"uri": "//localhost:1313/vi/2-prerequiste/2.1-createec2/",
	"title": "Chuẩn bị VPC và EC2",
	"tags": [],
	"description": "",
	"content": "Trong bước này, chúng ta sẽ cần tạo một VPC có 2 subnet public / private. Sau đó tạo 2 EC2 Instance Linux nằm trong public subnet và private subnet.\nTổng quan kiến trúc sau khi các bạn hoàn tất bước này sẽ như sau:\nNội dung Tạo VPC Tạo Public subnet Tạo Private subnet Tạo security group Tạo 2 máy chủ Linux ở 2 subnet khác nhau "
},
{
	"uri": "//localhost:1313/vi/1-introduce/",
	"title": "Giới thiệu",
	"tags": [],
	"description": "",
	"content": "AWS Site-to-Site VPN là một dịch vụ giúp kết nối an toàn các mạng on-premises với đám mây AWS qua mạng internet. AWS Site-to-Site VPN cho phép xây dựng một kết nối VPN được mã hóa giữa mạng của on-premises và AWS, hỗ trợ các tiêu chuẩn bảo mật cao cấp, đảm bảo bảo mật nghiêm ngặt và duy trì kết nối ổn định với hệ thống mạng của bạn.\nVới việc sử dụng AWS Site-to-Site VPN, bạn sẽ có được những lợi ích sau:\nĐảm bảo bảo mật cao với mã hóa dữ liệu trong suốt quá trình truyền.. Tích hợp dễ dàng với các dịch vụ AWS khác như EC2, VPC, và S3,Cloudwatch\u0026hellip; Quản lý tập trung và đơn giản hóa việc kết nối với nhiều chi nhánh khác nhau. Hỗ trợ các giao thức định tuyến như Static Route và BGP để tối ưu hóa việc định tuyến. •\tAWS Site-to-Site VPN giúp tiết kiệm thời gian và chi phí, đồng thời đơn giản hóa việc triển khai và duy trì kết nối an toàn giữa on-premises với AWS. Với những ưu điểm trên, bạn cũng có thể sử dụng VPN thay vì sử dụng Direct Connect nó giúp chúng ta tiết kiệm được chi phí khi đường truyền.\n"
},
{
	"uri": "//localhost:1313/vi/2-prerequiste/2.1-createec2/2.1.1-createvpc/",
	"title": "Tạo VPC ",
	"tags": [],
	"description": "",
	"content": "Tạo VPC Lab VPC Truy cập giao diện quản trị dịch vụ VPC Click Your VPC. Click Create VPC. Tại trang Create VPC. Tại mục Name tag điền ASG. Tại mục IPv4 CIDR điền : 10.10.0.0/16. Click Create VPC. "
},
{
	"uri": "//localhost:1313/vi/",
	"title": "VPN Site To Site",
	"tags": [],
	"description": "",
	"content": "Triển Khai VPN Site to Site Tổng quan Trong bài lab này, bạn sẽ tìm hiểu các bước thiết lập kết nối giữa Site Amazon Web Service và Site DC On-Premise sử dụng thiết bị Fortigate 100F. Thực hành tạo kết nối giữa các máy chủ của VPN trên aws và các máy trong trung tâm dữ liệu On-Premise.\nNội dung Giới thiệu Các bước chuẩn bị VPN Site to Site AWS Cấu Hình VPN Site to Site on Fortigate Dọn dẹp tài nguyên "
},
{
	"uri": "//localhost:1313/vi/2-prerequiste/",
	"title": "Các bước chuẩn bị",
	"tags": [],
	"description": "",
	"content": "\rĐể cần thực hiện lab này bạn cần phải nghiên cứu thêm về tường lửa Fortigate. Có thể dùng ảo hóa trên vmware ( license 14 ngày) để test lab. Còn ở đây mình dùng Fortigate 100F( Version ……) Bạn cần tạo sẵn 2 Linux instance thuộc public subnet và private subnet để thực hiện bài thực hành này. Các bạn cần trang bị 1 số kiến thức liên quan đến routing dynamic, VPC,Cloudwatch,SSM\nĐể tìm hiểu cách tạo các EC2 instance và VPC với public/private subnet các bạn có thể tham khảo bài lab :\nGiới thiệu về Amazon EC2 Làm việc với Amazon VPC Để tìm hiểu cách tạo IAM role gán quyền ssm,cloudwatch các bạn có thể tham khảo bài lab:\nAWS CloudWatch Workshop Làm việc với Amazon System Manager - Session Manager Phụ lục\nChuẩn bị VPC và EC2 Instance Tạo IAM Role Tạo loggroup Cloudwatch Bật tính năng ssm lưu trữ log về cloudwatch Chuẩn bị thiết bị Fortigate "
},
{
	"uri": "//localhost:1313/vi/2-prerequiste/2.2-createiamrole/",
	"title": "Tạo IAM Role",
	"tags": [],
	"description": "",
	"content": "Tạo IAM Role Trong bước này chúng ta sẽ tiến hành tạo IAM Role. Trong IAM Role này sẽ được gán policy AmazonSSMManagedInstanceCore và CloudwatchLogsFullAccess, đây là policy cho phép máy chủ EC2 có thể giao tiếp với Session Manager và Cloud Watch log.\nTruy cập vào giao diện quản trị dịch vụ IAM Ở thanh điều hướng bên trái, chọn Roles. Chọn Create role. Click AWS service và click EC2. Click Next: Permissions. Trong thanh tìm kiếm, Điền AmazonSSMManagedInstanceCore và ấn phím Enter để tìm kiếm policy này. Chọn policy AmazonSSMManagedInstanceCore. Tiếp tục điền CloudwatchLogsFullAccess và ấn phím Enter để tìm kiếm policy này. Chọn policy CloudwatchLogsFullAccess Click Next: Tags. Click Next: Review. Đặt tên cho Role là SSM-Role ở Role Name Click Create Role Tiếp theo chúng ta sẽ gán role này vào các ec2 public và private. Truy cập vào giao diện quản trị dịch vụ máy chủ ảo. Click Instances Check EC2_Private Click Action -\u0026gt; Click Security Click Change security groups Chọn SSM-Role vừa tạo. Click **Update IAM role "
},
{
	"uri": "//localhost:1313/vi/2-prerequiste/2.1-createec2/2.1.2-createpublicsubnet/",
	"title": "Tạo Public subnet",
	"tags": [],
	"description": "",
	"content": "Tạo Public subnet Click Subnets. Click Create subnet. Tại trang Create subnet. Tại mục VPC ID click chọn Lab VPC. Tại mục Subnet name điền Lab Public Subnet. Tại mục Availability Zone chọn Availability zone đầu tiên. Tại mục IPv4 CIRD block điền 10.10.1.0/24. Kéo xuống cuối trang , click Create subnet.\nClick chọn Lab Public Subnet.\nClick Actions. Click Edit subnet settings. Click chọn Enable auto-assign public IPv4 address. Click Save. Click Internet Gateways. Click Create internet gateway. Tại trang Create internet gateway. Tại mục Name tag điền Lab IGW. Click Create internet gateway. Sau khi tạo thành công, click Actions. Click Attach to VPC. Tại trang Attach to VPC. Tại mục Available VPCs chọn ASG. Click Attach internet gateway. Kiểm tra quá trình attach thành công như hình dưới. Tiếp theo chúng ta sẽ tạo một custom route table để gán vào Public Subnet. Click Route Tables. Click Create route table. Tại trang Create route table. Tại mục Name, điền Route Table Public. Tại mục VPC, chọn ASG. Click Create route table. Sau khi tạo route table thành công. Click Edit routes. Tại trang Edit routes. Click Add route. Tại mục Destination điền 0.0.0.0/0 Tại mục Target chọn Internet Gateway sau đó chọn Lab IGW đã tạo trước đó Click Save changes. Click tab Subnet associations. Click Edit subnet associations để tiến hành associate custom routable chúng ta vừa tạo vào Lab Public Subnet. Tại trang Edit subnet associations. Click chọn Lab Public Subnet. Click Save associations. Kiểm tra thông tin route table đã được associate với Lab Public Subnet và thông tin route đi internet đã được trỏ đến .Internet Gateway. như hình dưới. "
},
{
	"uri": "//localhost:1313/vi/3-vpnsitetositeaws/",
	"title": "Cấu hình Site to Site VPN trên AWS",
	"tags": [],
	"description": "",
	"content": "Chúng ta kết nối TTDL On-premise tới Amazon VPC sử dụng VPN phần cứng Fortigate Để thiết lập kết nối VPN Site to Site, chúng ta sẽ cần tạo và cấu hình Virtual Private Gateway VPG và Customer Gateway CGW.\nVirtual Private Gateway (VPG) là một trung tâm điều khiển kết nối the virtual private network (VPN) được cài đặt ở đầu AWS. A Customer Gateway (CGW) là thành phần đại diện cho thiết bị VPN cứng hoặc mềm được cài đặt ở đầu Khách hàng. Ở đây chính là fortigate. VPN tunnel sẽ được thiết lập ngay sau khi lưu lượng dữ liệu được truyền tải giữa AWS và hệ thống mạng của khách hàng. Trong kết nối đó, ta phải chỉ rõ loại định tuyến sẽ được sử dụng để đảm bảo an toàn cũng như chất lượng về mặt truyền tải dữ liệu. Do CGW ở phía khách hàng có hỗ trợ Border Gateway Protocol (BGP), thì trong cấu hình VPN connection ta bắt buộc phải đặt định tuyến là dynamic routing. Amazon VPC cung cấp nhiều loại CGWs, và từng CGW được gán với một VPG nhưng 1 VPG có thể kết hợp với nhiều CGW (many-to-one design). Để hỗ trợ mô hình này thì địa chỉ IP của CGW phải là duy nhất trong một region. Amazon VPC cũng cung cấp các thông tin cần thiết cho Nhân viên quản trị mạng có thể cấu hình CGW và thiết lập kết nối VPN tới VPG trên AWS. Kết nối VPN luôn bao gồm 2 Internet Protocol Security (IPSec) tunnels để đảm bảo tính sẵn sàng cao của kết nối.\nBên dưới là những đặc điểm quan trọng mà ta cần nắm về VPG, CGW, and VPN:\nVPG là thành phần đầu cuối của VPN tunnel nằm trên AWS. CGW có thể là thiết bị phần cứng hoặc ứng dụng phần mềm nằm ở đầu Khách hàng trong kết nối VPN tunnel. Bạn phải khởi tạo kết nối VPN tunnel từ CGW tới VPG. VPG hỗ trợ cả dynamic routing (BGP) và static routing. Kết nối VPN luôn có 2 tunnels nhằm đảm bảo tính sẵn sàng cao cho kết nối với VPC từ site Khách hàng. Bài lab giúp chúng ta học được cách thiết lập một kết nối Site to Site VPN trong AWS. Trong thực tế, giải pháp này khá được nhiều doanh nghiệp sử dụng do ưu điểm Fortigate thông dụng và sử dụng nhiều trong doanh nghiệp, đồng thời rất dễ cấu hình do AWS cung cấp hướng dẫn cho từng loại thiết bị Customer trong 1 file cấu hình. Việc Customer bận tâm duy nhất đó là chuẩn bị đường internet để từ đó tạo đường hầm an toàn bí mật (sử dụng IPSec) kết nối tới AWS thông qua AWS VPN tunnel. Trong phạm vi bài lab, giả lập rằng chúng ta có Main office ( VPC ASG ) và Branch office đặt tại DC On-premises để có sự khác biệt về mặt network. Trên VPC thực hiện tạo EC2 cho phép SSM ,và 1 PC ở DC. Việc ta cần làm là cấu hình VPN để các địa chỉ Private IP ở 2 đầu có thể ping được lẫn nhau sử dụng VPN Site-to-Site.\nPhụ lục\nTạo Virtual Private Gateway Cấu hình Customer Gateway Tạo kết nối VPN "
},
{
	"uri": "//localhost:1313/vi/2-prerequiste/2.3-createloggroup/",
	"title": "CloudWatch Logs",
	"tags": [],
	"description": "",
	"content": "Tạo CloudWatch LogGroup Trong bước này chúng ta sẽ tiến hành tạo 2 Cloud Watch Log Group. Mục đích : + Lưu trữ log của vpn aws cho phép chúng ta dễ dàng kiểm tra và biết trạng thái vpn. + lưu trữ các dòng lệnh đã sử dụng khi dùng ssm truy cập vào ec2.\nTruy cập vào giao diện quản trị dịch vụ Cloud Watch\nTạo Log Groups cho ssm:\nChọn Log Groups Chọn Create log group Log group name nhập /aws/ssm/hosts Chọn Create Tương tự tạo Log Groups cho VPN:\nName nhập vpns2s/log\n"
},
{
	"uri": "//localhost:1313/vi/2-prerequiste/2.4-enablelogssm/",
	"title": "Quản lý session logs với CloudWatch Logs",
	"tags": [],
	"description": "",
	"content": "Trong bước này chúng ta sẽ tiến hành bật tính năng Cloud Watch trong SSM để cho phép lưu trữ log truy cập và các lệnh thực hiện khi user truy cập vào EC2 về cloudwatch\nTrong giao diện AWS Systems Manager\nChọn Session Manager Chọn tab Preferences Chọn Edit Trong Cloudwatch logging Chọn Enable Bỏ chọn Enforce encryption Chọn vpns2s/log Chọn Save "
},
{
	"uri": "//localhost:1313/vi/2-prerequiste/2.1-createec2/2.1.3-createprivatesubnet/",
	"title": "Tạo Private subnet",
	"tags": [],
	"description": "",
	"content": "Tạo Private subnet Tại giao diện VPC. Click Subnets. Click Create subnet. Tại trang Create subnet. Tại mục VPC ID click chọn ASG. Tại mục Subnet name điền Private Subnet 1. Tại mục Availability Zone chọn Availability zone đầu tiên. Tại mục IPv4 CIRD block điền 10.10.100.0/24. Kéo xuống cuối trang , click Create subnet. Lập lại các bước trên để tạo cho Private Subnet 2 Tiếp theo chúng ta sẽ tạo một custom route table để gán vào Private Subnet.\nClick Route Tables. Click Create route table. Tại trang Create route table. Tại mục Name, điền Route Table Private. Tại mục VPC, chọn ASG. Click Create route table. Trong giao diện Route table - Private Chọn Subnet Associations Chọn Edit subnet associations Trong giao diện Edit subnet associations Chọn 2 private subnet Chọn Save associations Bước tiếp theo chúng ta sẽ tạo các nat gateway để cho phép các ec2 ở private subnet được phép giao tiếp với internet.\nTạo NAT Gateway Trong bước này chúng ta sẽ tiến hành tạo nat gateway để cho phép các ec2 trong private subnet được ra ngoài internet.\nTruy cập giao diện quản trị VPC. Trong giao diện NAT gateway\nName, nhập My Natgw Subnet, chọn Public subnet 2 Connectivity type, chọn Public Elastic IP allocation ID, Click Allocate Elastic IP để tạo Elastic IP. Click Create Nat Gateway Thành công tạo NAT gateway Trong giao diện Route table - Private\nChọn Routes Chọn Edit routes Trong giao diện Edit routes\nChọn Add route Chọn Destination: 0.0.0.0/0 Target: NAT Gateway Chọn Save changes Kiểm tra lại Routes "
},
{
	"uri": "//localhost:1313/vi/4-vpnsitetositefortigate/",
	"title": "Cấu hình VPN Site to Site Trên Fortigate",
	"tags": [],
	"description": "",
	"content": "AWS Site-to-Site VPN là một dịch vụ giúp kết nối an toàn các mạng on-premises với đám mây AWS qua mạng internet. AWS Site-to-Site VPN cho phép xây dựng một kết nối VPN được mã hóa giữa mạng của on-premises và AWS, hỗ trợ các tiêu chuẩn bảo mật cao cấp, đảm bảo bảo mật nghiêm ngặt và duy trì kết nối ổn định với hệ thống mạng của bạn. Với việc sử dụng AWS Site-to-Site VPN, bạn sẽ có được những lợi ích sau:\nĐảm bảo bảo mật cao với mã hóa dữ liệu trong suốt quá trình truyền. Tích hợp dễ dàng với các dịch vụ AWS khác như EC2, VPC, và S3,Cloudwatch.. Quản lý tập trung và đơn giản hóa việc kết nối với nhiều chi nhánh khác nhau. Hỗ trợ các giao thức VPN phổ biến như IPsec và BGP để tối ưu hóa việc định tuyến. AWS Site-to-Site VPN giúp tiết kiệm thời gian và chi phí, đồng thời đơn giản hóa việc triển khai và duy trì kết nối an toàn giữa on-premises với AWS. Với những ưu điểm trên, bạn cũng có thể sử dụng VPN thay vì sử dụng Direct Connect nó giúp chúng ta tiết kiệm được chi phí khi đường truyền.\n"
},
{
	"uri": "//localhost:1313/vi/2-prerequiste/2.1-createec2/2.1.4-createsecgroup/",
	"title": "Tạo các security group",
	"tags": [],
	"description": "",
	"content": "Tạo các security group Trong bước này chúng ta sẽ tiến hành tạo các security group được sử dụng cho các instance của chúng ta.\nTạo security group cho Linux instance nằm trong public subnet Truy cập giao diện quản trị dịch vụ VPC Click Security Group. Click Create security group. Tại mục Security group name, điền private_security_group. Tại mục Description, điền SG Public for EC2 Public. Tại mục VPC, chọn lại VPC ASG bạn đã tạo cho bài lab này. Trong Inbound rule ta add 2 rule SSH và All ICMP - IPV4 Giữ nguyên Outbound rule, kéo chuột xuống phía dưới. Click Create security group. Các bạn có thể thấy, security group chúng ta tạo sử dụng cho Linux public instance sẽ không cần phải mở các port truyền thống để ssh như port 22.\nTạo security group cho EC2 instance nằm trong private subnet Sau khi tạo thành công security group cho Linux instance nằm trong public subnet, click vào link Security Groups để quay trở lại danh sách Security groups. Click Create security group.\nTại mục Security group name, điền Public_security_group.\nTại mục Description, điền SG for EC2 Private. Tại mục VPC, chọn ASG bạn đã tạo cho bài lab này. Trong Inbound rule ta add 1 All ICMP - IPV4. Rule này cho phép ping của EC2 nằm trong private subnet Giữ nguyên Outbound rule, kéo chuột xuống phía dưới. Click Create security group. Đối với Instance trong private subnet, chúng ta sẽ dùng Session Manager qua kết nối đã được mã hóa TLS. Vì vậy chúng ta có thể kết nối đến thông qua nat gateway Để có thể tối ưu hóa chi phí hơn thì bạn có thể dùng endpoint của Session Manager thay vì đi ra internet bằng nat gateway. Ở đây bài của mình sẽ forcus nhiều VPN nên nếu các bạn triển khai endpoint thì tham khảo lab Làm việc với Amazon System Manager - Session Manager\n"
},
{
	"uri": "//localhost:1313/vi/2-prerequiste/2.1-createec2/2.1.5-createec2linux/",
	"title": "Tạo EC2 ở Private Subnet và Public Subnet",
	"tags": [],
	"description": "",
	"content": " Truy cập giao diện quản trị dịch vụ EC2 Click Instances. Click Launch instances. Tại trang Step 1: Choose an Amazon Machine Image (AMI). Click Select để lựa chọn AMI Amazon Linux 2 AMI. Kéo xuống dưới phần: Click chọn Instance type t2.micro. Tại mục Network chọn ASG. Tại mục Subnet chọn Public Subnet 1 Tại mục Auto-assign Public IP chọn Enable Chọn Select an existing security group Chọn security group public_security_group. Tại Phần Advanced Details. Mục IAM instance profile chọn SSM-Role Chọn Lauch instance Lập lại tương tự từ bước 2-4. Tạo 1 EC2. Nhưng lưu ý 1 vài điểm Tại mục Subnet chọn Private Subnet 2 Tại mục Auto-assign Public IP chọn Disable Chọn security group private_security_group Còn lại làm như bước 2-4 Sau khi tạo xong ta có kết quả "
},
{
	"uri": "//localhost:1313/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "//localhost:1313/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]